import { IonButton, IonCheckbox, IonContent, IonHeader, IonIcon, IonInput, IonItem, IonLabel, IonPage, IonTitle, IonToast, IonToolbar } from '@ionic/react';
import { lockClosedOutline, lockOpenOutline, logoGoogle } from 'ionicons/icons';
import { loginUser } from '../firebaseConfig';
import '../css/Inicio.css';
import { useState } from 'react';

function InicioSesion () {

  const[username,setUsername]=useState('');
  const[password,setPassword]=useState('');

  const [showToast, setShowToast] = useState(false);

  const presentToast = (position: 'top' | 'bottom' | 'middle') => {
    setShowToast(true);
    setTimeout(() => setShowToast(false), 2000);
  };

  async function login(){
    const res=await loginUser(username,password)
    if(!res){
      presentToast('bottom');
    }
  }

  return (
    <IonPage  id='contenido'>
      <IonHeader>
        <IonToolbar color="primary">
          <IonTitle>Inicio</IonTitle>
        </IonToolbar>
      </IonHeader>
      <IonContent fullscreen>
        <IonLabel id='texto'>Iniciar sesión</IonLabel>
        <IonItem fill="outline" id='caja'>
        <IonLabel position="floating" id='email'>Email</IonLabel>
        <IonInput placeholder="Introduce email" id='email'
        onIonChange={(e: any)=>setUsername(e.target.value)}/>
      </IonItem>

      <IonItem fill="outline" id='caja'>
        <IonLabel position="floating" id='pass'>Contraseña</IonLabel>
        <IonInput type="password" 
        placeholder="Introduce tu contraseña" 
        id='pass'
        onIonChange={(e: any)=>setPassword(e.target.value)}/>
      </IonItem>

      <IonButton id='botones' onClick={login}>
        Iniciar sesión
        <IonIcon slot="end" icon={lockOpenOutline}></IonIcon>
      </IonButton>

      <IonToast
        isOpen={showToast}
        onDidDismiss={() => setShowToast(false)}
        message="El email o contraseña proporcionados no existen."
        position="bottom"
        duration={4000}
      />

      <IonButton color="danger" id='botones'>
        Iniciar con Google
        <IonIcon slot="end" icon={logoGoogle}></IonIcon>
      </IonButton>

      <IonLabel id='text'>¿Aún no tienes una cuenta?</IonLabel>

      <IonButton id='botones' routerLink='/Registro'>
        Registrarse
        <IonIcon slot="end" icon={lockClosedOutline}></IonIcon>
      </IonButton>

      </IonContent>
    </IonPage>
  );
};

export default InicioSesion;
